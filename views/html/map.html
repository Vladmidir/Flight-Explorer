<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leaflet Map</title>
  <!-- Include Leaflet CSS and JS files -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"  crossorigin=""></script>
  <link rel="stylesheet" href="styling/style.css" type="text/css" media="screen">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
<!-- Create a div with id "map" for Leaflet to render the map -->
<div id="map" style="position: fixed; height: 100%; width: 100%;"></div>

<script>
  try {
    // Initialize the map
    var map = L.map('map').setView([51.505, -1.09], 10);

    // Add a tile layer
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      minZoom: 1, maxZoom: 20,
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    var polygon = L.polygon([
      [51.505, -1.09],
      [65.503, -20.06],
    ], {color: 'blue', weight: 6}).addTo(map);

    var marker2 = L.marker([51.505, -1.09]).addTo(map);
    var marker3 = L.marker( [65.503, -20.06]).addTo(map);

    function showMessage() {
      // var popup = L.popup()
      //         .setLatLng([51.513, -1.09])
      //         .setContent("I am a standalone popup.")
      //         .openOn(map);
      // marker2.bindPopup(number).openPopup(popup);
      $("#text_modal").text(number);
      $('#myModalSent').modal('show');

    }



    polygon.on('click', showMessage);

  } catch (error) {
    // Handle the error
    displayError('An error occurred:', error.message);
  }

  function displayError(message, details) {
    // Display the error message to the user
    console.error(message, details);

    // You can choose to show the error message in the HTML or use other UI elements
    var errorElement = document.createElement('div');
    errorElement.style.color = 'red';
    errorElement.innerHTML = `<strong>Error:</strong> ${message}<br>${details}`;
    document.body.appendChild(errorElement);
  }

</script>

<div id="myModalSent" class="modal fade" data-backdrop="static" data-keyboard="false" style='top: 20%;' role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Flight Information</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p id="text_modal">Hey you clicked it </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>